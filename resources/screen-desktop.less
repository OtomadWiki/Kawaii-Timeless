@import 'variables.less';

// T181484 (firefox and chrome; doesn't fix anything else as yet)
//body,
//html {
//	scroll-padding-top: @fixed-header-height + 0.5em;
//}

// Override menu display from mobile
// This also requires !importants where they hover and stuff
.dropdown,
.sidebar-inner {
	display: block !important;
}

.ts-inner {
	max-width: @content-width;
	box-sizing: border-box;
	padding: 0 1em;
	margin: auto;
}

div.mw-notification-area {
	top: @fixed-header-height + 0.25em;
}

/* Header */

#mw-header {
	.flex-display;
}

#mw-header-container {
	/* Stupid IE10+ bug requires defining the height property for this to work
	 * the way it is intended; without doing that this'll break horribly under
	 * IE10 and IE11.
	 * @see https://phabricator.wikimedia.org/T173769
	 */
	height: 0;
	position: fixed;
	z-index: 100;
	top: 0;
	width: 100%;
	color: @text;
	padding: 0.5em 0 0;
	min-height: @fixed-header-height;
	box-sizing: border-box;
	box-shadow: 0 0.125rem 2rem rgba( 193, 159, 168, 0.5 );
}

#kawaiiHeaderBackground {
	height: 0;
	position: fixed;
	z-index: -2;
	top: 0;
	width: 100%;
	.backdropfx();
	min-height: @fixed-header-height;
}

//Acrylic
#kawaiiHeaderBackground:before, #personal .dropdown:before {
	content: '';
	background-image: url(/kawaii/texture-noise.png);
	width: 100%;
	height: 100%;
	display: block;
	opacity: 0.05;
	top: 0;
	left: 0;
	position: absolute;
}

#p-logo-text {
	.flex(0, 0, auto, 1);
}

#p-search {
	.flex(1, 1, auto, 2);
}

#searchInput {
	background: transparent;
	padding: 0.3em 3.7em 0.3em 1.5em;
}

#simpleSearch {
	border: none;
	background: rgba( 128, 128, 128, 0.1 );
	max-width: 22em;
	margin: 0 1em 0 auto;
	border-radius: 3em;
	&:hover{
		background: rgba( 128, 128, 128, 0.15 );
	}
	//&:active, &:focus, &:focus-within{
	//	border-bottom: 2px solid @blue;
	//}
}

#searchButton, #mw-searchButton {
	height: 2.4em;
	background-size: 88%;
	background-position: center;
}

.suggestions {
	.backdropfx();
	transform: translateY(9px);

	.suggestions-special {
		background-color: transparent;
	}

	.suggestions-results {
		background-color: transparent;
	}

	.suggestions-result {
		padding: 0.5em 2em;
		transition: background cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;
	}

	.suggestions-result-current {
		background-color: @hover;
	}
}

#user-tools {
	.flex(0, 1, auto, 3);
	display: inline-block;

	h2 span {
		display: inline-block;
		max-width: 300px;
	}
}

#mw-header-nav-hack,
#mw-header-hack {
	position: fixed;
	z-index: 97;
	top: @fixed-header-height;
	box-shadow: 0 3px 3px 2px rgba( 0, 0, 0, 0.075 ), 0 0 2px rgba( 0, 0, 0, 0.2 );
}

#mw-header-nav-hack {
	display: none;
}

#personal {
	display: block;
	position: relative;
	padding-left: 1.5em;
	line-height: 1;
	float: left;

	.dropdown {
		display: block !important;
		.dropdown-menu();
		// .dropdown-pokey();
		z-index: -1;
		border-top-left-radius: 0;
		border-top-right-radius: 0;
		width: 12em;
		top: 3.16em;
	}

	.pokey {
		top: 1.9em;
	}

	h2 {
		margin: 0;
		cursor: pointer;

		span {
			display: none
		}
	}
}

/* 头像 */
#personal .header-avatar {
	width: 36px;
	height: 36px;
	margin-top: 1px;
	border-radius: 50%;
	z-index: 200;
	-moz-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
	user-select: none;
	transition: transform 0.7s cubic-bezier(0.16,1,0.3,1), box-shadow 0.7s cubic-bezier(0.16,1,0.3,1);
	background-repeat: no-repeat;
    background-size: 100% 100%;
	background-color: @base70;
}
#personal.dropdown-active .header-avatar {
	transform: translateY(27px) scale(2.0833);
	box-shadow: 0 0 1em 0.1em rgba( 251, 114, 153, 0.4 );
}
@keyframes avatar-ripple {
	0% {
		opacity: 0.8;
		transform: scale(1);
	}

	100% {
		opacity: 0;
		transform: scale(3);
	}
}
#personal.dropdown-active .header-avatar::before {
	content: '';
	width: 100%;
	height: 100%;
	background-color: @blue;
	position: relative;
	display: block;
	border-radius: 50%;
	opacity: 0;
	animation: avatar-ripple 0.9s cubic-bezier(0.16,1,0.3,1);
}

.client-nojs #personal:hover {
	.pokey,
	.dropdown {
		display: block !important;
	}
}

#mw-wrapper .dropdown-active {
	.pokey,
	.dropdown,
	.sidebar-inner {
		display: block !important;
	}
}

#p-variants-desktop {
	float: right;
	padding: 4px 6px 4px 14px;
	position: relative;
	border-radius: 4em;
	transition: background cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;

	&.dropdown-active {
		background: @hover
	}

	&.dropdown-active:active h3:after {
		transform: rotate(-180deg) translateY(-3px);
	}

	&.dropdown-active h3:after {
		transform: rotate(-180deg);
	}

	h3 {
		.dropdown-header();
		.dropdown-header-after();
		.ca-icon( 'images/languages-grey' );
		font-size: 1em;
		font-family: @fonts;
		border-bottom: transparent;
		margin: 0 0 -1em;
		line-height: 1.5;
		padding-bottom: 1em;

		&:after {
			transition: transform .4s cubic-bezier(.22,.58,.12,.98);
		}
	}

	.dropdown {
		display: block !important;
		.dropdown-menu();
		// .dropdown-pokey();
		// Override the mobile thing
		top: 2.25em !important;
		margin-right: 2px;
		background: @background;
		height: 0;
		opacity: 0;

		.selected a {
			color: @text;
		}
	}

	&:active {
		h3:after {
			transform: translateY(3px);
		}
	}
}

.client-nojs #p-variants-desktop:hover .dropdown {
	display: block !important;
}

.mw-wiki-logo {
	display: block;
	margin: 0.75em auto 0;

	&.fallback {
		content: '';
		width: 11em;
		height: 11em;
		background-repeat: no-repeat;
		background-position: center center;
		border-radius: 16px;
	}

	&.timeless-logo {
		background-image: none;

		img {
			// Let's not assume our users are sizing these to anything in particular
			// 135px because that keeps things semi-consistent with logo parts of oldstyle logos
			width: 135px;
			height: auto;
			margin: 0.75em 0 0.5em;
		}
	}
}

#p-variants,
#other-languages.variants-only,
#mw-page-header-links #p-more,
.sidebar-chunk h2 {
	display: none;
}

/* Content */

#mw-content-container {
	margin-top: 0;
	padding-bottom: 1em;
}

#mw-wrapper #personal .dropdown h3 {
	text-align: center;
	border-bottom: none;
	margin: 1em 0.3em 1em 0.3em;
	transition: all 0.7s cubic-bezier(0.16,1,0.3,1);
}

/* Dropdown Animation */

@keyframes dropdown-li-move-up {
	0% {
		transform: translate(0,100px);
	}
	100% {
		transform: translate(0);
	}
}

@keyframes dropdown-li-move-left {
	0% {
		transform: translate(100px,0);
	}
	100% {
		transform: translate(0);
	}
}

#mw-wrapper .dropdown {
	& li {
	///	transform: translateY(100px);
		opacity: 0;
	}
	& h3 {
		transform: translateY(-80px);
		opacity: 0;
	}
}
#mw-wrapper .dropdown-active .dropdown {
	& li {
		animation: move-in-left cubic-bezier(0.22,0.58,0.12,0.98) 0.4s backwards;
		opacity: 1;
	}
	& h3 {
		transform: none;
		opacity: 1;
	}
}

#mw-site-navigation .sidebar-chunk li, #mw-related-navigation .sidebar-chunk li, #personal .dropdown li, #personal .dropdown h3, #p-variants-desktop .dropdown li {
	transition: transform cubic-bezier(0.22,0.58,0.12,0.98) 0.4s,opacity cubic-bezier(0.22,0.58,0.12,0.98) 0.4s,background cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;
	a {
		transition: transform cubic-bezier(0.22,0.58,0.12,0.98) 0.4s,opacity cubic-bezier(0.22,0.58,0.12,0.98) 0.4s,background cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;
	}
}

#mw-site-navigation .sidebar-chunk li a, #mw-related-navigation .sidebar-chunk li a, #p-variants-desktop .dropdown li a {
	display: inline-block;
	padding: 0.6em 0.4em;
	width: 100%;
}

#mw-wrapper #personal .dropdown {
	right: -6em;
}

#personal .dropdown li a {
	display: flex;
	padding: 0.5em 0.4em;
	width: 100%;
}

#mw-site-navigation .sidebar-chunk li:hover a, #mw-related-navigation .sidebar-chunk li:hover a, #personal .dropdown li:hover a, #p-variants-desktop .dropdown li:hover a, #mw-site-navigation .sidebar-chunk li a:focus, #mw-related-navigation .sidebar-chunk li a:focus, #personal .dropdown li a:focus, #p-variants-desktop .dropdown li a:focus {
	transform: translateX(5px) !important;
}

#personal .dropdown, #personal .dropdown, #mw-wrapper .dropdown{
	opacity: 100 !important;
}

//顶栏Dropdown
#mw-wrapper #user-tools .dropdown-active .dropdown{
	height: 340px;
	padding: 2em 1.2em 0;
	opacity: 100;
}

//语言变种Dropdown
#mw-wrapper #mw-page-header-links .dropdown-active .dropdown{
	height: 325px;
	padding: 1.9em 1.2em 0;
	opacity: 100;
	z-index: 101;
}

#mw-wrapper .dropdown-active .dropdown li:nth-child(1) {
	animation-delay: 0ms;
	transition-delay: 0ms;
  }
#mw-wrapper .dropdown-active .dropdown li:nth-child(2) {
	animation-delay: 20ms;
	transition-delay: 20ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(3) {
	animation-delay: 40ms;
	transition-delay: 40ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(4) {
	animation-delay: 60ms;
	transition-delay: 60ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(5) {
	animation-delay: 80ms;
	transition-delay: 80ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(6) {
	animation-delay: 100ms;
	transition-delay: 100ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(7) {
	animation-delay: 120ms;
	transition-delay: 120ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(8) {
	animation-delay: 140ms;
	transition-delay: 140ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(9) {
	animation-delay: 160ms;
	transition-delay: 160ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(10) {
	animation-delay: 180ms;
	transition-delay: 180ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(11) {
	animation-delay: 200ms;
	transition-delay: 200ms;
}
#mw-wrapper .dropdown-active .dropdown li:nth-child(12) {
	animation-delay: 220ms;
	transition-delay: 220ms;
}

/* Page Tools */
#ca-watch a {
	transform: none;
}

/* Special Page */
.mw-specialpages-list {
	& li {
		transition: background cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;
	}
	& li:hover {
		background-color: @hover;
	}
	& li:hover a {
		transform: translateX(5px);
	}
	& a {
		transition: transform cubic-bezier(0.22,0.58,0.12,0.98) 0.4s;
	}
}

/*Jump Animation*/
@keyframes jump {
	0% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-5px);
	}
	100% {
		transform: translateY(0);
	}
}

.jumpanim:hover {
	animation: jump .3s;
}

/* Wiki Logo */
.mw-wiki-logo.fallback {
	background-size: 90%;
}

/* Header Links */
#header-links-container {
	display: block;
	top: 0;
	height: 3.5em;
}

.header-links-ul {
	height: 100%;
	margin: 0;
	display: flex;
}

.header-links-li {
	height: 100%;
	margin: 0;
}

.header-links-a {
	height: 100%;
	text-align: center;
	padding: 0 14px 0 14px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #545454 !important;
	transition: color 0.2s;
	&:hover {
		color: @blue !important;
	}
}
